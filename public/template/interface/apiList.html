<div ng-include="'../template/_include/nav.html'" class="nav-header"></div>
<div class="container" id="apilist">
    <div class="serach-box">
        <!-- <div class="">
            <div class="col-lg-12">搜索框</div>
        </div> -->
        <div class="row">
            <div class="col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">请求路径</span>
                    <input type="text" class="form-control" placeholder="" ng-model="query.url">
                </div>
            </div>
            <div class="col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">接口名称</span>
                    <input type="text" class="form-control" placeholder="" ng-model="query.title">
                </div>
            </div>
            <div class="col-lg-3">
                <div class="dropdown form-group">
                    <a class="dropdown-toggle" placeholder="开始时间" id="dropdownStart" role="button" data-toggle="dropdown" data-target="#" href="#">
                        <div class="input-group date">
                            <input type="text" class="form-control" placeholder="Start Date" data-ng-model="query.updateBegin">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                        </div>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                        <datetimepicker data-ng-model="query.updateBegin" data-datetimepicker-config="{ dropdownSelector: '#dropdownStart', renderOn: 'end-date-changed', startView:'day', minView:'day' }" data-on-set-time="startDateOnSetTime()" data-before-render="startDateBeforeRender($dates)"></datetimepicker>
                    </ul>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="dropdown form-group">
                    <a class="dropdown-toggle" placeholder="结束时间" id="dropdownEnd" role="button" data-toggle="dropdown" data-target="#" href="#">
                        <div class="input-group date">
                            <input type="text" class="form-control" data-ng-model="query.updateEnd" placeholder="End Date">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                        </div>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                        <datetimepicker data-ng-model="query.updateEnd" data-datetimepicker-config="{ dropdownSelector: '#dropdownEnd', renderOn: 'start-date-changed', startView:'day', minView:'day' }" data-on-set-time="endDateOnSetTime()" data-before-render="endDateBeforeRender($view, $dates, $leftDate, $upDate, $rightDate)"></datetimepicker>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">项目</span>
                    <input type="text" class="form-control" placeholder="" ng-model="query.project">
                </div>
            </div>
            <div class="col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">产品线</span>
                    <input type="text" class="form-control" placeholder="" ng-model="query.productVersion">
                </div>
            </div>
            <div class="col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">标签</span>
                    <input type="text" class="form-control" placeholder="" ng-model="query.productVersion">
                </div>
            </div>
            <div class="col-lg-3">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-checked="query.favourite"> 我订阅的
                    </label>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <button type="button" ng-click="search()" class="btn btn-primary">查 询</button>
            </div>
        </div>
    </div>
    <div class="api-item-box">
        <div class="api-item" ng-repeat="api in apiList" ng-click="goAciton(api)">
            <div class="title">
                <label class="t-l">{{api.title}}</label>
                <span class="product-lable">{{api.project.name}}</span>
                <label class="product-tags">{{api.tags}}</label>
                <div class="api-item-op">
                    <a data-toggle="tooltip" ng-click="search();$event.stopPropagation();" data-placement="删除" title="删除"><span class="glyphicon glyphicon-trash"></span></a>
                    <a class="show-products" ng-if="api.favourite" ng-click="toggleFavorite(api._id,true)" data-toggle="tooltip" data-placement="已订阅" title="已订阅">
                        <span class="glyphicon glyphicon-star"></span>
                    </a>
                    <a class="show-products" ng-if="!api.favourite" ng-click="toggleFavorite(api._id,false)" data-toggle="tooltip" data-placement="添加订阅" title="点击添加订阅">
                        <span class="glyphicon glyphicon-star-empty"></span>
                    </a>
                </div>
            </div>
            <div class="api-url">
                请求路径：<span>{{api.url}}</span>
            </div>
            <div class="">
                详情描述：<span>{{api.description}}</span>
            </div>
            <div class="api-products">
                产品线：<span ng-repeat="product in api.products">{{product.name}} </span>
            </div>
            <div class="row api-item-bottom">
                <div class="col-lg-4">创建时间：<span>{{api.createAt | date:"yyyy-MM-dd HH:mm:ss"}}</span></div>
                <div class="col-lg-4">更新时间：<span>{{api.updateAt | date:"yyyy-MM-dd HH:mm:ss"}}</span></div>
            </div>
        </div>
    </div>
</div>
